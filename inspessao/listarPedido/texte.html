<?php
include '../../generalPhp/conection.php'; // Inclua o arquivo de conexão com o banco de dados no início do seu script

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $id_item = $_POST['id_item'];

    // Verifica se um arquivo foi enviado
    if (isset($_FILES['imagem']) && $_FILES['imagem']['error'] === UPLOAD_ERR_OK) {
        // Define o diretório de destino para salvar a imagem
        $uploadDir = 'uploads/';

        // Gere um nome único para o arquivo
        $filename = uniqid() . '_' . $_FILES['imagem']['name'];

        // Caminho completo para a imagem no servidor
        $uploadPath = $uploadDir . $filename;

        // Move o arquivo para o diretório de uploads
        if (move_uploaded_file($_FILES['imagem']['tmp_name'], $uploadPath)) {
            echo "Imagem enviada e salva com sucesso.";
        } else {
            echo "Erro ao salvar a imagem.";
        }
    } else {
        echo "Nenhuma imagem foi enviada.";
    }
} else {
    echo "Método de requisição inválido.";
}
?>